% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/realized_measures.R
\name{rSemiCov}
\alias{rSemiCov}
\title{Realized Semicovariance}
\usage{
rSemiCov(
  rData,
  cor = FALSE,
  alignBy = NULL,
  alignPeriod = NULL,
  makeReturns = FALSE
)
}
\arguments{
\item{rData}{an \code{xts} or \code{data.table} object containing returns or prices, possibly for multiple assets over multiple days}

\item{cor}{boolean, in case it is \code{TRUE}, and the input data is multivariate, the correlation is returned instead of the covariance matrix. \code{FALSE} by default.}

\item{alignBy}{character, indicating the time scale in which \code{alignPeriod} is expressed. Possible values are: \code{"secs"}, \code{"seconds"}, \code{"mins"}, \code{"minutes"}, \code{"hours"}
To aggregate based on a 5 minute frequency, set \code{alignPeriod} to 5 and \code{alignBy} to \code{"minutes"}.}

\item{alignPeriod}{positive numeric, indicating the number of periods to aggregate over. E.g. to aggregate
based on a 5 minute frequency, set \code{alignPeriod} to 5 and \code{alignBy} to \code{"minutes"}.}

\item{makeReturns}{boolean, should be \code{TRUE} when \code{rData} contains prices instead of returns. \code{FALSE} by default.}
}
\value{
In case the data consists of one day a list of five \eqn{N x N} matrices are returned. These matrices are named \code{mixed}, \code{positive}, \code{negative}, \code{concordant}, and \code{rCov}.
The latter matrix corresponds to the realized covariance estimator and is thus named like the function \code{\link{rCov}}.
In case the data spans more than one day, the list for each day will be put into another list named according to the date of the estimates.
}
\description{
Calculate the Realized Semicovariances (rSemiCov).
Let \eqn{r_{t,i}} be an intraday \eqn{M x N} return matrix and \eqn{i=1,...,M}
the number of intraday returns. Then, let p = max(r_{t,i},0) and n = min(r_{t,i}).

Then, the realized semicovariance is given by the following three matrices:

\deqn{
 \mbox{pos}_t =\sum_{i=1}^{M}p_{t,i}p'_{t,i}
} 
\deqn{
 \mbox{neg}_t =\sum_{i=1}^{M}n_{t,i}n'_{t,i}
} 
\deqn{
 \mbox{mixed}_t =\sum_{i=1}^{M}(p_{t,i}n'_{t,i} + n_{t,i}p'_{t,i})
}

The mixed covariance matrix will have 0 on the diagonal.
From these three matrices, the realized covariance can be constructed as pos + neg + mixed.
The concordant semicovariance matrix is pos + neg.
The off-diagonals of the concordant matrix is always positive, while for the mixed matrix, it is always negative.
}
\details{
In the case that cor is TRUE, the mixed matrix will be an \eqn{N x N} matrix filled with NA as mapping the mixed covariance matrix into correlation space is impossible due to the 0-diagonal.
}
\examples{
# Realized semi-variance/semi-covariance for prices aligned   
# at 5 minutes.

# Univariate: 
rSV = rSemiCov(rData = sampleTData[, list(DT, PRICE)], alignBy = "minutes", 
                   alignPeriod = 5, makeReturns = TRUE)
rSV
\dontrun{
library("xts")
# Multivariate multi day:
rSC <- rSemiCov(sampleOneMinuteData, makeReturns = TRUE) # rSC is a list of lists
# We extract the covariance between stock 1 and stock 2 for all three covariances.
mixed <- do.call(rbind, lapply(rSC, function(x) x[["mixed"]][1,2]))
neg <- do.call(rbind, lapply(rSC, function(x) x[["negative"]][1,2]))
pos <- do.call(rbind, lapply(rSC, function(x) x[["positive"]][1,2]))
covariances <- xts(cbind(mixed, neg, pos), as.Date(rownames(pos)))
colnames(covariances) <- c("mixed", "neg", "pos")
# We make a quick plot of the different covariances
plot(covariances)
addLegend(lty = 1) # Add legend so we can distinguish the series.
}
}
\author{
Emil Sjoerup
}
\keyword{volatility}
